$.fn.makeTemplate=function(a){return params=jQuery.extend({user:"",template:"dados.ejs",param:"dados"},a),this.each(function(){user=params.user,dados=user.models[0].attributes[params.param],html=new EJS({url:"templates/"+params.template}).render(dados),$(this).html(html)})},function(){Walcart.GetUser=Backbone.Collection.extend({url:"request/usuario.json"})}($),function(){Walcart.UserView=Backbone.View.extend({dadosPessoais:{init:function(){this.render(),this.events()},render:function(){user=new Walcart.GetUser,user.fetch({success:function(a){$("#user-data").makeTemplate({user:a,template:"template-dados.ejs",param:"dados"})}})},events:function(){$('#nav-user li[data-page="dados"]').addClass("active").siblings().removeClass("active")}},endereco:{init:function(){this.render(),this.events()},render:function(){user=new Walcart.GetUser,user.fetch({success:function(a){$("#user-data").makeTemplate({user:a,template:"template-endereco.ejs",param:"data_enderecos"})}})},events:function(){$('#nav-user li[data-page="enderecos"]').addClass("active").siblings().removeClass("active")}},carrinho:{init:function(){this.render(),this.events()},render:function(){var a=new Walcart.GetUser;a.fetch({success:function(a){$("#user-data").makeTemplate({user:a,template:"template-carrinho.ejs",param:"data_carrinho"})}})},events:function(){$('#nav-user li[data-page="carrinho"]').addClass("active").siblings().removeClass("active")}}})}($),function(){Walcart.UserRoutes=Backbone.Router.extend({routes:{"":"carrinho",dados:"dadosUsuario",enderecos:"enderecos",carrinho:"carrinho"}}),Walcart.userRouter=new Walcart.UserRoutes,Walcart.view=new Walcart.UserView,Walcart.userRouter.on({"route:dadosUsuario":function(){Walcart.view.dadosPessoais.init()},"route:enderecos":function(){Walcart.view.endereco.init()},"route:carrinho":function(){Walcart.view.carrinho.init()}})}($),Backbone.history.start();